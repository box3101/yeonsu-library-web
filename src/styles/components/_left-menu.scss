@use '../globals' as *;

.left-menu {
	flex: 0 0 to-rem(280);
	position: sticky;
	top: 0;
	// height: 100vh;
	overflow: hidden;
	padding-bottom: to-rem(64);

	@include tablet {
		display: none;
	}
}

.left-menu-nav {
	height: 100%;
	overflow-y: auto;
	margin-top: to-rem(41);

	.left-menu-title {
		padding: to-rem(32) 0;
		border-bottom: 1px solid $gray-300;

		.left-menu-title-text {
			color: #1e2124;
			font-size: to-rem(24);
			font-weight: 700;
			margin-left: to-rem(10);

			@include tablet {
				font-size: to-rem(20);
			}
		}
	}

	.menu-section {
		border-bottom: 1px solid #e5e8eb;
		display: flex;
		flex-direction: column;
		justify-content: center;
		align-items: flex-start;
		width: 100%;
		&.is-active {
			.menu-section-title {
				border-bottom: 3px solid var(--color-primary-pr07, #244874);
				background: var(--color-action-secondary-selected, #eef2f7);
				box-sizing: border-box;
			}
			.menu-section-title .menu-title-text {
				color: var(--color-primary-pr08, #18304d);
			}
		}

		&:last-child {
			border-bottom: none;
		}

		.menu-section-title {
			width: 100%;
			min-height: 58px;
			@include flex;
			align-items: center;
			justify-content: space-between;
			font-size: to-rem(16);
			font-weight: 500;
			border: none;
			cursor: pointer;
			text-align: left;
			padding: 16px 0;
			padding-left: to-rem(20);
			padding-right: to-rem(20);

			&:hover {
				background: #f3f4f6;
				color: $primary-color;
			}

			&.expanded {
				border-bottom: 3px solid var(--color-primary-pr07, #244874);
				background: var(--color-action-secondary-selected, #eef2f7);
				.menu-title-text {
					color: var(--color-primary-pr08, #18304d);
				}

				.menu-arrow {
					transform: rotate(180deg);
				}
			}

			&.active,
			&.direct-link.active {
				background: #e3f2fd;
				color: $primary-color;
				border-bottom: 3px solid $primary-color;
			}

			&.direct-link {
				text-decoration: none;

				&:hover {
					background: #f3f4f6;
					color: $primary-color;
				}
			}

			.menu-title-text {
				flex: 1;
				font-size: to-rem(17);
				font-weight: 700;
				color: #1e2124;
			}

			.menu-arrow {
				flex-shrink: 0;
				transition: transform 0.2s ease-in-out;
			}
		}

		.menu-list {
			list-style: none;
			margin: 0;
			padding: 0;
			max-height: 0;
			overflow: hidden;
			transition: max-height 0.3s ease-in-out;
			background: #ffffff;
			margin: 10px 0;
			display: none;
			width: 100%;

			&.expanded {
				max-height: to-rem(500);
				display: block;
			}

			.menu-item {
				width: 100%;
				margin-bottom: 5px;
				&:last-child {
					margin-bottom: 0;
				}
				&.is-active {
					.menu-link {
						border-radius: var(--radius-medium2, 6px);
						background: var(--color-action-secondary-selected, #eef2f7);
						color: var(--color-primary-pr08, #18304d);
						font-weight: 700;
					}
				}

				.menu-link {
					@include flex;
					align-items: center;
					padding: to-rem(16) to-rem(20) to-rem(16) to-rem(40);
					color: $gray-900;
					font-weight: 500;
					text-decoration: none;
					font-size: to-rem(17);
					line-height: 1;
					transition: all 0.2s ease-out;
					background: #ffffff;
					position: relative;

					&::before {
						content: '';
						position: absolute;
						left: 20px;
						top: 50%;
						transform: translateY(-50%);
						bottom: 0;
						width: 4px;
						height: 4px;
						border-radius: 50%;
						background: #323333;
					}

					&:hover {
						border-radius: var(--radius-medium2, 6px);
						background: var(--color-action-secondary-selected, #eef2f7);
						transform: translateX(2px);
					}

					// 클릭 효과 (활성화 시뮬레이션)
					&:active {
						transform: translateX(1px);
						background-color: #e3f2fd;

						&::before {
							background: #1976d2;
							transform: translateY(-50%) scale(0.9);
						}
					}

					&.active {
						background-color: #e1effc;
						color: $primary-color;
						font-weight: 500;
						position: relative;

						&::before {
							content: '';
							position: absolute;
							left: 0;
							top: 0;
							bottom: 0;
							width: 3px;
							background: $primary-color;
						}
					}
				}
			}
		}
	}
}

.left-menu-nav {
	&::-webkit-scrollbar {
		width: 4px;
	}

	&::-webkit-scrollbar-track {
		background: transparent;
	}

	&::-webkit-scrollbar-thumb {
		background: #cdd1d5;
		border-radius: 2px;

		&:hover {
			background: #b2b8bd;
		}
	}
}
