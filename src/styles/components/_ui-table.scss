// Variables
@use '../variables/colors' as *;
@use '../variables/typography' as *;
@use '../variables/layout' as *;
@use '../abstracts' as *;

.ui-table-wrapper {
  margin-top: to-rem(30);
  width: 100%;
  overflow: hidden;

  @include mobile {
    margin-top: to-rem(20);
    border-radius: 0;
    border-left: none;
    border-right: none;
    overflow-x: auto;
  }

  // 스티키 헤더 옵션
  &--sticky {
    .ui-table__head {
      position: sticky;
      top: 0;
      z-index: 10;
      background: $gray-50;

      &::after {
        content: '';
        position: absolute;
        bottom: -1px;
        left: 0;
        right: 0;
        height: 1px;
        background: $gray-300;
      }
    }
  }
}

.ui-table {
  width: 100%;
  min-width: to-rem(800);
  border-collapse: collapse;
  display: flex;
  flex-direction: column;

  @include mobile {
    min-width: to-rem(800);
  }

  &__caption {
    @include sr-only;
  }

  &__head {
    flex-shrink: 0;
    display: table;
    width: 100%;
    table-layout: fixed;
    background: #edf1f1;
    border-top: 2px solid #004d80;
    border-bottom: 1px solid #cdd1d5;
  }

  &__body {
    flex: 1;
    overflow-y: auto;
    display: block;

    // 공통 스크롤바 스타일 사용하므로 개별 스타일 제거
  }

  &__row--body {
    display: table;
    width: 100%;
    table-layout: fixed;
    min-height: to-rem(50);
    border-bottom: 1px solid #cdd1d5;
    transition: background-color 0.2s ease;
    background: #ffffff;

    @include mobile {
      min-height: to-rem(48);
    }

    &:hover {
      background: $gray-50;
    }

    &:last-child {
      border-bottom: none;
    }
  }

  &__cell {
    padding: to-rem(12) to-rem(16);
    vertical-align: middle;

    @include mobile {
      padding: to-rem(8) to-rem(6);
    }

    &:last-child {
      border-right: none;
    }

    &--head {
      font-size: to-rem(15);
      font-weight: 700;
      color: #000000;
      text-align: center;
      height: to-rem(44);
      line-height: 1.5;
      background: #edf1f1;

      @include mobile {
        font-size: to-rem(14);
        height: to-rem(40);
        padding: to-rem(6) to-rem(4);
      }

      &:last-child {
        border-right: none;
      }
    }

    &--body {
      font-size: to-rem(17);
      font-weight: 400;
      color: #464c53;
      padding: to-rem(12) to-rem(16);
      line-height: 1.5;
      font-family: $font-family-primary;

      @include mobile {
        font-size: to-rem(14);
        padding: to-rem(8) to-rem(6);
      }
    }

    &--checkbox {
      width: to-rem(48);
      text-align: center;
      padding: to-rem(8) to-rem(12);

      @include mobile {
        width: to-rem(40);
        padding: to-rem(4);
      }
    }

    &--index {
      width: to-rem(80);
      text-align: center;

      @include mobile {
        width: to-rem(60);
      }
    }

    &--action {
      width: to-rem(112);
      text-align: center;

      @include mobile {
        width: to-rem(100);
      }
    }

    &--sortable {
      cursor: pointer;
      user-select: none;

      &:hover {
        background: $gray-100;
      }
    }
  }

  &__cell-content {
    display: flex;
    align-items: center;
    gap: to-rem(4);
    min-height: to-rem(24);
    width: 100%;

    @include mobile {
      gap: to-rem(2);
      min-height: to-rem(20);
    }

    &--left {
      justify-content: flex-start;
    }

    &--center {
      justify-content: center;
    }

    &--right {
      justify-content: flex-end;
    }
  }

  &__checkbox {
    width: to-rem(16);
    height: to-rem(16);
    cursor: pointer;
    accent-color: $primary-color;

    @include mobile {
      width: to-rem(16);
      height: to-rem(16);
    }
  }

  &__sort-btn {
    @include flex(row, center, center);
    background: none;
    border: none;
    padding: to-rem(2);
    cursor: pointer;
    color: $gray-400;
    transition: color 0.2s ease;
    border-radius: to-rem(2);

    &:hover {
      color: $primary-color;
      background: $gray-50;
    }
  }

  &__sort-icon {
    display: none;
    width: to-rem(10);
    height: to-rem(10);

    @include mobile {
      width: to-rem(10);
      height: to-rem(10);
    }
  }

  &__badge {
    @include flex(row, center, center);
    padding: to-rem(2) to-rem(6);
    border-radius: to-rem(3);
    font-size: to-rem(17);
    font-weight: 500;
    text-align: center;
    white-space: nowrap;
    line-height: 1.2;

    @include mobile {
      font-size: to-rem(12);
      padding: to-rem(2) to-rem(4);
    }

    // 도서관별 색상
    &--\[동춘\]일반자료실 {
      background: $blue-50;
      color: $blue-600;
      border: 1px solid $blue-200;
    }

    &--상호대차 {
      background: $orange-50;
      color: $orange-600;
      border: 1px solid $orange-200;
    }

    &--전체 {
      background: $gray-50;
      color: $gray-700;
      border: 1px solid $gray-200;
    }

    // 대출 상태별 색상
    &--비치중 {
      background: $gray-50;
      color: $success-color;
      border: 1px solid $gray-200;
    }

    &--대출중 {
      background: $red-50;
      color: $red-700;
      border: 1px solid $red-200;
    }

    &--예약가능 {
      background: $blue-50;
      color: $blue-700;
      border: 1px solid $blue-200;
    }

    // 처리상태 배지
    &--접수대기 {
      background: #fbeced;
      color: #d7424e;
      border: 1px solid #d7424e;
      border-radius: to-rem(4);
      padding: to-rem(0) to-rem(10);
      height: to-rem(32);
      line-height: to-rem(32);
      font-size: to-rem(15);
      cursor: pointer;
      transition: all 0.2s ease;

      @include mobile {
        padding: to-rem(4) to-rem(8);
        font-size: to-rem(12);
        height: to-rem(28);
        line-height: to-rem(28);
      }
    }

    &--접수완료 {
      background: #f1f2f2;
      color: #4b4d4d;
      border: 1px solid #4b4d4d;
      border-radius: to-rem(4);
      padding: to-rem(0) to-rem(10);
      height: to-rem(32);
      line-height: to-rem(32);
      font-size: to-rem(15);
      cursor: pointer;
      transition: all 0.2s ease;

      @include mobile {
        padding: to-rem(4) to-rem(8);
        font-size: to-rem(12);
        height: to-rem(28);
        line-height: to-rem(28);
      }
    }

    &--답변완료 {
      background: #ecf2f9;
      color: #244874;
      border: 1px solid #244874;
      border-radius: to-rem(4);
      padding: to-rem(0) to-rem(10);
      height: to-rem(32);
      line-height: to-rem(32);
      font-size: to-rem(17);
      cursor: pointer;
      transition: all 0.2s ease;

      @include mobile {
        padding: to-rem(4) to-rem(8);
        font-size: to-rem(12);
        height: to-rem(28);
        line-height: to-rem(28);
      }
    }

    // 기관별 색상 배지 수정
    &--전체 {
      background: transparent;
      border: none;
      color: $institution-전체;
      font-weight: 500;
    }

    &--연수꿈담 {
      background: transparent;
      border: none;
      color: $institution-연수꿈담;
      font-weight: 500;
    }

    &--송도국제 {
      background: transparent;
      color: $institution-송도국제;
      font-weight: 500;
    }

    &--청학 {
      background: transparent;
      color: $institution-청학;
      font-weight: 500;
    }

    &--누리공원 {
      background: transparent;
      color: $institution-누리공원;
      font-weight: 500;
    }

    &--해돋이 {
      background: transparent;
      color: $institution-해돋이;
      font-weight: 500;
    }

    &--해찬솔공원 {
      background: transparent;
      color: $institution-해찬솔공원;
      font-weight: 500;
    }

    &--선학별빛 {
      background: transparent;
      color: $institution-선학별빛;
      font-weight: 500;
    }

    // 서비스 버튼
    &--예약하기 {
      background: $primary-color;
      color: $white;
      border: 1px solid $primary-color;
      padding: to-rem(4) to-rem(8);
      cursor: pointer;
      transition: all 0.2s ease;

      @include mobile {
        padding: to-rem(4) to-rem(8);
        font-size: to-rem(12);
      }

      &:hover {
        background: $secondary-color;
        border-color: $secondary-color;
      }
    }

    &--new {
      background: #8ccb67;
      color: $white;
      margin-left: to-rem(4);
      font-size: to-rem(17);
      font-weight: 700;
      padding: to-rem(3) to-rem(11);
      border-radius: to-rem(4);
      line-height: 1;
      text-align: center;
      width: to-rem(20);
      height: to-rem(20);
      display: inline-flex;
      align-items: center;
      justify-content: center;

      @include mobile {
        font-size: to-rem(12);
        padding: to-rem(2) to-rem(4);
        margin-left: to-rem(3);
        width: to-rem(18);
        height: to-rem(18);
      }
    }
  }

  &__title-wrapper {
    display: flex;
    justify-content: inherit;
    width: 100%;
    align-items: center;
    gap: to-rem(8);
  }

  &__lock-icon {
    width: to-rem(24);
    height: to-rem(24);
    background: #d3ebfd;
    border-radius: to-rem(16);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;

    svg {
      width: to-rem(16);
      height: to-rem(16);
      fill: #18304d;
    }
  }

  &__title-link {
    @include flex(row, center, center);
    gap: to-rem(4);
    color: $gray-700;
    text-decoration: none;
    transition: color 0.2s ease;
    width: 100%;
    justify-content: inherit;

    @include mobile {
      gap: to-rem(2);
    }

    &:hover {
      color: $primary-color;
      text-decoration: underline;
    }
  }

  &__title-content {
    @include flex(row, center, center);
    gap: to-rem(4);
    width: 100%;
    justify-content: inherit;

    @include mobile {
      gap: to-rem(2);
    }
  }

  &__title-text {
    font-weight: 400;
    font-size: to-rem(17);
    color: #464c53;
    line-height: 1.5;
    font-family: $font-family-primary;
    word-break: keep-all;
    text-align: left;

    @include mobile {
      font-size: to-rem(14);
      line-height: 1.3;
    }
  }

  &__text {
    font-size: to-rem(17);
    font-weight: 400;
    color: #464c53;
    line-height: 1.5;
    word-break: keep-all;
    font-family: $font-family-primary;
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: nowrap;
    max-width: 100%;

    &--link {
      text-decoration: none;
      color: #464c53;
      &:hover {
        color: $primary-color;
        text-decoration: underline;
        text-underline-offset: to-rem(5);
      }
    }

    // 여러 줄일 때는 ... 표시
    &--multiline {
      white-space: normal;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
      text-overflow: ellipsis;
      line-height: 1.4;
      max-height: calc(1.4em * 2);
    }

    @include mobile {
      font-size: to-rem(14);
      line-height: 1.3;
    }

    // 청구기호, 등록번호 등 코드형 텍스트
    &--code {
      font-family: 'Courier New', monospace;
      font-size: to-rem(11);
      color: $gray-500;
      letter-spacing: -0.02em;

      @include mobile {
        font-size: to-rem(12);
      }
    }
  }

  &__empty {
    padding: to-rem(40) to-rem(20);
    text-align: center;
    border-top: 1px solid $gray-300;

    @include mobile {
      padding: to-rem(24) to-rem(16);
    }

    &-text {
      font-size: to-rem(14);
      color: $gray-400;
      margin: 0;

      @include mobile {
        font-size: to-rem(14);
      }
    }
  }

  &__button {
    padding: to-rem(4) to-rem(12);
    border-radius: to-rem(4);
    border: 1px solid transparent;
    cursor: pointer;
    transition: all 0.2s ease;
    white-space: nowrap;
    font-size: to-rem(15);
    font-weight: 400;
    color: $gray-900;

    @include mobile {
      padding: to-rem(4) to-rem(10);
      font-size: to-rem(14);
    }

    &--default {
      border: 1px solid $gray-600;
      background: transparent;

      &:hover {
        background: $gray-600;
        color: $white;
      }
    }
  }

  &__button-group {
    display: flex;
    gap: to-rem(8);
    align-items: center;
    justify-content: inherit;

    @include mobile {
      gap: to-rem(6);
    }
  }

  &__icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-size: to-rem(16);
    color: $gray-600;
    cursor: pointer;
    transition: color 0.2s ease;

    @include mobile {
      font-size: to-rem(16);
    }

    &:hover {
      color: $primary-color;
    }

    // 아이콘 크기별 스타일
    &.icon-sm {
      font-size: to-rem(14);

      @include mobile {
        font-size: to-rem(14);
      }
    }

    &.icon-md {
      font-size: to-rem(16);

      @include mobile {
        font-size: to-rem(16);
      }
    }

    &.icon-lg {
      font-size: to-rem(18);

      @include mobile {
        font-size: to-rem(18);
      }
    }
  }
}
