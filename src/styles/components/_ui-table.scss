// Variables
@use '../variables/colors' as *;
@use '../variables/typography' as *;
@use '../variables/layout' as *;
@use '../abstracts' as *;

.ui-table-wrapper {
  margin-top: to-rem(30);
  width: 100%;
  background: $white;
  border: 1px solid $gray-300;
  border-radius: to-rem(8);
  overflow: hidden;

  @include mobile {
    margin-top: to-rem(20);
    border-radius: 0;
    border-left: none;
    border-right: none;
  }

  // 스티키 헤더 옵션
  &--sticky {
    .ui-table__head {
      position: sticky;
      top: 0;
      z-index: 10;
      background: $gray-50;

      &::after {
        content: '';
        position: absolute;
        bottom: -1px;
        left: 0;
        right: 0;
        height: 1px;
        background: $gray-300;
      }
    }
  }
}

.ui-table {
  width: 100%;
  min-width: to-rem(800);
  border-collapse: collapse;
  display: flex;
  flex-direction: column;
  max-height: to-rem(600);

  @include mobile {
    min-width: to-rem(600);
  }

  &__caption {
    @include sr-only;
  }

  &__head {
    flex-shrink: 0;
    display: table;
    width: 100%;
    table-layout: fixed;
    background: $gray-50;
    border-bottom: 1px solid $gray-300;
  }

  &__body {
    flex: 1;
    overflow-y: auto;
    display: block;
    max-height: to-rem(540);

    // 공통 스크롤바 스타일 사용하므로 개별 스타일 제거
  }

  &__row--body {
    display: table;
    width: 100%;
    table-layout: fixed;
    min-height: to-rem(56);
    border-bottom: 1px solid $gray-200;
    transition: background-color 0.2s ease;

    @include mobile {
      min-height: to-rem(48);
    }

    &:hover {
      background: $gray-50;
    }

    &:last-child {
      border-bottom: none;
    }
  }

  &__cell {
    padding: to-rem(12) to-rem(16);
    vertical-align: middle;

    @include mobile {
      padding: to-rem(8) to-rem(6);
    }

    &:last-child {
      border-right: none;
    }

    &--head {
      font-size: to-rem(15);
      font-weight: 700;
      color: $gray-900;
      text-align: center;
      height: to-rem(62);
      line-height: 1.5;
      border-bottom: 1px solid $gray-300;
      background: $gray-50;

      @include mobile {
        font-size: to-rem(11);
        height: to-rem(40);
        padding: to-rem(6) to-rem(4);
      }
    }

    &--body {
      font-size: to-rem(15);
      font-weight: 400;
      color: $gray-700;
      padding: to-rem(12) to-rem(16);
      line-height: 1.5;
      font-family: $font-family-primary;

      @include mobile {
        font-size: to-rem(11);
        padding: to-rem(8) to-rem(6);
      }
    }

    &--checkbox {
      width: to-rem(48);
      text-align: center;
      padding: to-rem(8) to-rem(12);

      @include mobile {
        width: to-rem(32);
        padding: to-rem(4);
      }
    }

    &--index {
      width: to-rem(60);
      text-align: center;
      font-weight: 500;
      color: $gray-500;

      @include mobile {
        width: to-rem(40);
      }
    }

    &--action {
      width: to-rem(120);
      text-align: center;

      @include mobile {
        width: to-rem(80);
      }
    }

    &--sortable {
      cursor: pointer;
      user-select: none;

      &:hover {
        background: $gray-100;
      }
    }
  }

  &__cell-content {
    display: flex;
    align-items: center;
    gap: to-rem(4);
    min-height: to-rem(24);
    width: 100%;

    @include mobile {
      gap: to-rem(2);
      min-height: to-rem(20);
    }

    &--left {
      justify-content: flex-start;
    }

    &--center {
      justify-content: center;
    }

    &--right {
      justify-content: flex-end;
    }
  }

  &__checkbox {
    width: to-rem(16);
    height: to-rem(16);
    cursor: pointer;
    accent-color: $primary-color;

    @include mobile {
      width: to-rem(14);
      height: to-rem(14);
    }
  }

  &__sort-btn {
    @include flex(row, center, center);
    background: none;
    border: none;
    padding: to-rem(2);
    cursor: pointer;
    color: $gray-400;
    transition: color 0.2s ease;
    border-radius: to-rem(2);

    &:hover {
      color: $primary-color;
      background: $gray-50;
    }
  }

  &__sort-icon {
    width: to-rem(10);
    height: to-rem(10);

    @include mobile {
      width: to-rem(8);
      height: to-rem(8);
    }
  }

  &__badge {
    @include flex(row, center, center);
    padding: to-rem(2) to-rem(6);
    border-radius: to-rem(3);
    font-size: to-rem(11);
    font-weight: 500;
    text-align: center;
    white-space: nowrap;
    line-height: 1.2;

    @include mobile {
      font-size: to-rem(9);
      padding: to-rem(1) to-rem(3);
    }

    // 도서관별 색상
    &--\[동춘\]일반자료실 {
      background: $blue-50;
      color: $blue-600;
      border: 1px solid $blue-200;
    }

    &--상호대차 {
      background: $orange-50;
      color: $orange-600;
      border: 1px solid $orange-200;
    }

    &--전체 {
      background: $gray-50;
      color: $gray-700;
      border: 1px solid $gray-200;
    }

    // 대출 상태별 색상
    &--비치중 {
      background: $gray-50;
      color: $success-color;
      border: 1px solid $gray-200;
    }

    &--대출중 {
      background: $red-50;
      color: $red-700;
      border: 1px solid $red-200;
    }

    &--예약가능 {
      background: $blue-50;
      color: $blue-700;
      border: 1px solid $blue-200;
    }

    // 서비스 버튼
    &--예약하기 {
      background: $primary-color;
      color: $white;
      border: 1px solid $primary-color;
      padding: to-rem(4) to-rem(8);
      cursor: pointer;
      transition: all 0.2s ease;

      @include mobile {
        padding: to-rem(3) to-rem(6);
        font-size: to-rem(10);
      }

      &:hover {
        background: $secondary-color;
        border-color: $secondary-color;
      }
    }

    &--new {
      background: $red-500;
      color: $white;
      margin-left: to-rem(4);
      font-size: to-rem(10);
      padding: to-rem(1) to-rem(4);

      @include mobile {
        font-size: to-rem(8);
        padding: to-rem(1) to-rem(2);
        margin-left: to-rem(2);
      }
    }
  }

  &__title-wrapper {
    display: flex;
    justify-content: inherit;
    width: 100%;
  }

  &__title-link {
    @include flex(row, center, center);
    gap: to-rem(4);
    color: $gray-700;
    text-decoration: none;
    transition: color 0.2s ease;
    width: 100%;
    justify-content: inherit;

    @include mobile {
      gap: to-rem(2);
    }

    &:hover {
      color: $primary-color;
      text-decoration: underline;
    }
  }

  &__title-content {
    @include flex(row, center, center);
    gap: to-rem(4);
    width: 100%;
    justify-content: inherit;

    @include mobile {
      gap: to-rem(2);
    }
  }

  &__title-text {
    font-weight: 400;
    font-size: to-rem(15);
    color: $gray-700;
    line-height: 1.5;
    font-family: $font-family-primary;
    word-break: keep-all;

    @include mobile {
      font-size: to-rem(11);
      line-height: 1.3;
    }
  }

  &__text {
    font-size: to-rem(15);
    font-weight: 400;
    color: $gray-700;
    line-height: 1.5;
    word-break: keep-all;
    font-family: $font-family-primary;

    @include mobile {
      font-size: to-rem(11);
      line-height: 1.3;
    }

    // 청구기호, 등록번호 등 코드형 텍스트
    &--code {
      font-family: 'Courier New', monospace;
      font-size: to-rem(11);
      color: $gray-500;
      letter-spacing: -0.02em;

      @include mobile {
        font-size: to-rem(9);
      }
    }
  }

  &__empty {
    padding: to-rem(40) to-rem(20);
    text-align: center;
    border-top: 1px solid $gray-300;

    @include mobile {
      padding: to-rem(24) to-rem(16);
    }

    &-text {
      font-size: to-rem(14);
      color: $gray-400;
      margin: 0;

      @include mobile {
        font-size: to-rem(12);
      }
    }
  }

  &__button {
    padding: to-rem(4) to-rem(12);
    border-radius: to-rem(4);
    border: 1px solid transparent;
    cursor: pointer;
    transition: all 0.2s ease;
    white-space: nowrap;
    font-size: to-rem(15);
    font-weight: 400;
    color: $gray-900;

    @include mobile {
      padding: to-rem(3) to-rem(8);
      font-size: to-rem(12);
    }

    &--default {
      border: 1px solid $gray-600;
      background: transparent;

      &:hover {
        background: $gray-600;
        color: $white;
      }
    }
  }

  &__button-group {
    display: flex;
    gap: to-rem(8);
    align-items: center;
    justify-content: inherit;

    @include mobile {
      gap: to-rem(4);
    }
  }

  &__icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-size: to-rem(16);
    color: $gray-600;
    cursor: pointer;
    transition: color 0.2s ease;

    @include mobile {
      font-size: to-rem(14);
    }

    &:hover {
      color: $primary-color;
    }

    // 아이콘 크기별 스타일
    &.icon-sm {
      font-size: to-rem(14);

      @include mobile {
        font-size: to-rem(12);
      }
    }

    &.icon-md {
      font-size: to-rem(16);

      @include mobile {
        font-size: to-rem(14);
      }
    }

    &.icon-lg {
      font-size: to-rem(18);

      @include mobile {
        font-size: to-rem(16);
      }
    }
  }
}
