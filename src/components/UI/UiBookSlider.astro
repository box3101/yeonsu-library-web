---
export interface BookItem {
  id: string | number;
  title: string;
  author: string;
  imageUrl: string;
  href?: string;
}

export interface Props {
  books: BookItem[];
  slidesPerView?: number;
  spaceBetween?: number;
  loop?: boolean;
  autoplay?: boolean | { delay: number; disableOnInteraction: boolean };
  navigation?: boolean;
  className?: string;
  id?: string;
}

const {
  books,
  slidesPerView = 5,
  spaceBetween = 16,
  loop = false,
  autoplay = false,
  navigation = true,
  className = '',
  id = `book-slider-${Math.random().toString(36).substr(2, 9)}`,
} = Astro.props;

const sliderClasses = ['ui-book-slider', 'swiper', className].filter(Boolean).join(' ');
---

<div class={`ui-book-slider-container ${className}`}>
  <div class={sliderClasses} id={id}>
    <div class="swiper-wrapper">
      {
        books.map(book => (
          <div class="swiper-slide">
            <div class="ui-book-slider__item">
              <div class="ui-book-slider__image-wrapper">
                {book.href ? (
                  <a href={book.href} class="ui-book-slider__image-link">
                    <img src={book.imageUrl} alt={book.title} class="ui-book-slider__image" />
                  </a>
                ) : (
                  <img src={book.imageUrl} alt={book.title} class="ui-book-slider__image" />
                )}
              </div>
              <div class="ui-book-slider__info">
                <h3 class="ui-book-slider__title">
                  {book.href ? (
                    <a href={book.href} class="ui-book-slider__title-link">
                      {book.title}
                    </a>
                  ) : (
                    book.title
                  )}
                </h3>
                <p class="ui-book-slider__author">{book.author}</p>
              </div>
            </div>
          </div>
        ))
      }
    </div>

    <!-- Navigation buttons -->
    {
      navigation && (
        <>
          <button class={`ui-book-slider__nav ui-book-slider__nav--prev ${id}-btn-prev`} type="button" aria-label="이전 도서">
            <img src="./assets/images/icon/icon-arrow-left.svg" class="icon icon-arrow-left" />
          </button>
          <button class={`ui-book-slider__nav ui-book-slider__nav--next ${id}-btn-next`} type="button" aria-label="다음 도서">
            <img src="./assets/images/icon/icon-arrow-right.svg" class="icon icon-arrow-right" />
          </button>
        </>
      )
    }
  </div>
</div>

<!-- 외부 JS 파일에서 처리: swiper.js -->
