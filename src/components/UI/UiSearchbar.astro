---
import UiSelect from './UiSelect.astro';
import UiInput from './UiInput.astro';
import UiButton from './UiButton.astro';

// 간단한 Props 정의 (타입스크립트 제거)
const {
  id,
  selectOptions = [{ value: '', label: '전체' }],
  selectValue = '',
  placeholder = '검색어를 입력해주세요.',
  inputValue = '',
  buttonText = '검색',
  onSearch = 'handleSearch',
  class: className = '',
  fullWidth = false,
  size = 'medium',
  ...rest
} = Astro.props;

const searchbarId = id || `searchbar-${Math.random().toString(36).substr(2, 9)}`;
---

<div
  class={`ui-searchbar ui-searchbar--${size} ${fullWidth ? 'ui-searchbar--full-width' : ''} ${className}`}
  id={searchbarId}
  {...rest}
>
  <div class="ui-searchbar__content">
    <!-- 셀렉트박스 (검색 타입) -->
    <UiSelect
      name="searchType"
      options={selectOptions}
      value={selectValue}
      size={size}
      width="auto"
      class="ui-searchbar__select"
    />

    <!-- 텍스트 입력 -->
    <UiInput
      type="text"
      name="searchQuery"
      placeholder={placeholder}
      value={inputValue}
      size={size}
      class="ui-searchbar__input w-350-mobile-full"
    />

    <!-- 검색 버튼 -->
    <UiButton
      text={buttonText}
      variant="darkBlue"
      size={size}
      onclick={onSearch ? `${onSearch}()` : undefined}
      class="ui-searchbar__button"
    />
  </div>
</div>

<style lang="scss" is:global>
  @use '@styles/abstracts' as *;
  @use '@styles/variables/colors' as *;

  .ui-searchbar {
    background-color: #eef2f7;
    border-radius: to-rem(12);
    padding: to-rem(22) to-rem(32);

    &--full-width {
      width: 100%;
    }

    &__content {
      @include flex(row, flex-end, center);
      gap: to-rem(10);
      width: 100%;
    }

    &__select {
      min-width: to-rem(120);
      flex-shrink: 0;
    }


    &__button {
      flex-shrink: 0;
    }

    // 반응형 스타일
    @include mobile {
      padding: to-rem(16);

      &__content {
        flex-direction: column;
        align-items: stretch;
        gap: to-rem(12);
      }

      &__select,
      &__input,
      &__button {
        width: 100%;
      }
    }
  }
</style>
