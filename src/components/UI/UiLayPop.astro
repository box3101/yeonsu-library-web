---
/**
 * 메인레이어팝업 컴포넌트
 * - 메인 페이지 레이어 팝업 (공지사항, 이벤트 등)
 * - Swiper 슬라이더 기반
 * - 쿠키 기반 "오늘하루 그만보기" 기능 지원
 */
export interface Props {
  /**
   * 팝업 고유 ID
   */
  id?: string;

  /**
   * 팝업 슬라이드 데이터
   */
  slides?: Array<{
    image: string;
    alt: string;
    link?: string;
  }>;

  /**
   * 추가 CSS 클래스
   */
  class?: string;
}

const {
  id = 'main-layer-popup',
  slides = [],
  class: className = '',
} = Astro.props;

// 팝업 클래스 생성
const popupClasses = [
  'main-layer-popup',
  className,
].filter(Boolean).join(' ');
---

<!-- 메인 레이어 팝업 -->
<div
  class={popupClasses}
  id={id}
  data-popup={id}
  aria-hidden="false"
  role="dialog"
  aria-modal="true"
  aria-labelledby={`${id}-title`}
>
  <!-- 팝업 백드롭 -->
  <div class="main-layer-popup__backdrop"></div>

  <!-- 팝업 컨테이너 -->
  <div class="main-layer-popup__container">
    <!-- 팝업 액션 버튼 -->
    <div class="main-layer-popup__actions">
      <button
        type="button"
        class="main-layer-popup__button main-layer-popup__button--close"
        data-popup-close
        aria-label="팝업 닫기"
      >
        닫기
      </button>
      <button
        type="button"
        class="main-layer-popup__button main-layer-popup__button--hide-today"
        data-popup-hide-today
        aria-label="오늘 하루 그만보기"
      >
        오늘하루 그만보기
      </button>
    </div>

    <!-- 팝업 콘텐츠 -->
    <div class="main-layer-popup__content">
      <!-- Swiper 슬라이더 -->
      <div class="main-layer-popup__swiper">
        <div class="swiper" data-popup-swiper>
          <div class="swiper-wrapper">
            {slides.length > 0 ? (
              slides.map((slide) => (
                <div class="swiper-slide">
                  {slide.link ? (
                    <a href={slide.link} target="_blank" rel="noopener noreferrer">
                      <img src={slide.image} alt={slide.alt} />
                    </a>
                  ) : (
                    <img src={slide.image} alt={slide.alt} />
                  )}
                </div>
              ))
            ) : (
              <div class="swiper-slide">
                <slot />
              </div>
            )}
          </div>
        </div>

        <!-- Swiper 페이지네이션 -->
        <div class="swiper-pagination"></div>
      </div>

      <!-- Swiper 네비게이션 버튼 -->
      <div class="swiper-button-prev"></div>
      <div class="swiper-button-next"></div>
    </div>
  </div>
</div>
