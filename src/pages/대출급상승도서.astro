---
import Layout from '../layouts/Layout.astro';
import SubLayout from '../components/layout/SubLayout.astro';

const breadcrumbItems = [
	{ label: '홈', href: '/' },
	{ label: '도서검색', href: '/search' },
	{ label: '대출급상승도서', href: '/대출급상승도서' },
];

// 대출급상승도서 데이터
const popularBooks = [
	{
		rank: 1,
		title: '저주토끼 (리커버)',
		author: '2022 / 아작 / 정보라(지은이)',
		isbn: '9791166866665',
		currentCount: 456,
		previousCount: 56,
		totalCount: 512,
		image: '/assets/images/book1.jpg',
	},
	{
		rank: 2,
		title: '순례 주택 :유은실 소설',
		author: '2021 / 비용소 / 지은이: 유은실',
		isbn: '9788949123493',
		currentCount: 109,
		previousCount: 44,
		totalCount: 153,
		image: '/assets/images/book2.jpg',
	},
	{
		rank: 3,
		title: '빛과 실',
		author: '2025 / 문학과지성사 / 지은이: 한강',
		isbn: '9788932043562',
		currentCount: 86,
		previousCount: 89,
		totalCount: 175,
		image: '/assets/images/book3.jpg',
	},
	{
		rank: 4,
		title: '언젠가 우리가 같은 별을 바라본다면 : 차인표 장편소설',
		author: '2021 / 해결책 / 글: 차인표',
		isbn: '9791191061048',
		currentCount: 72,
		previousCount: 56,
		totalCount: 154,
		image: '/assets/images/book4.jpg',
	},
	{
		rank: 5,
		title: '언젠가 우리가 같은 별을 바라본다면 : 차인표 장편소설',
		author: '2023 / 미래엔 / 원작: 흔한남매 ;그림: 도니패밀리',
		isbn: '9791168418516',
		currentCount: 72,
		previousCount: 90,
		totalCount: 162,
		image: '/assets/images/book5.jpg',
	},
];
---

<Layout title="대출급상승도서">
	<SubLayout title="대출급상승도서" breadcrumbItems={breadcrumbItems} menuType="도서검색">
		<div class="info-notice program-notice">
			<div class="program-notice__content">
				<ul class="program-notice__list">
					<li>전국 공공도서관에서 최근 7일간 대출순위가 급상승한 도서를 보실 수 있습니다.</li>
				</ul>
			</div>
		</div>

		<div class="date-selectors">
			<div class="date-selector-header">
				<div class="date-controls">
					<button class="arrow-btn prev-btn" aria-label="이전 날짜">
						<svg width="20" height="20" viewBox="0 0 20 20" fill="none">
							<path
								d="M12.5 15L7.5 10L12.5 5"
								stroke="#666"
								stroke-width="2"
								stroke-linecap="round"
								stroke-linejoin="round"
							>
							</path>
						</svg>
					</button>

					<div class="date-display">
						<div class="date-item">
							<span class="date-text">2025년</span>
						</div>
						<div class="date-item">
							<span class="date-text">08월</span>
						</div>
						<div class="date-item">
							<span class="date-text">23일</span>
						</div>
					</div>

					<button class="arrow-btn next-btn" aria-label="다음 날짜">
						<svg width="20" height="20" viewBox="0 0 20 20" fill="none">
							<path
								d="M7.5 5L12.5 10L7.5 15"
								stroke="#666"
								stroke-width="2"
								stroke-linecap="round"
								stroke-linejoin="round"
							>
							</path>
						</svg>
					</button>
				</div>
			</div>

			<!-- 대출급상승도서 테이블 -->
			<div class="popular-books-table">
				<!-- 테이블 헤더 -->
				<div class="table-header">
					<div class="header-cell rank-col">번호</div>
					<div class="header-cell institution-col">기관</div>
					<div class="header-cell date1-col">작성일</div>
					<div class="header-cell date2-col">작성일</div>
					<div class="header-cell count-col">조회수</div>
					<div class="header-cell title-col">제목</div>
					<div class="header-cell isbn-col">ISBN</div>
				</div>

				<!-- 테이블 바디 -->
				<div class="table-body">
					{
						popularBooks.map(book => (
							<div class="table-row">
								<div class="table-cell rank-col">
									<span class="rank-number">{book.rank}</span>
								</div>

								<div class="table-cell institution-col">
									<div class="rank-change-badge">
										<svg width="24" height="24" viewBox="0 0 24 24" fill="none">
											<path d="M12 4L8 8H16L12 4Z" fill="white" />
										</svg>
										<span class="change-number">{book.currentCount}</span>
									</div>
								</div>

								<div class="table-cell date1-col">
									<span class="date-text">{book.previousCount}</span>
								</div>

								<div class="table-cell date2-col">
									<span class="date-text">{book.totalCount}</span>
								</div>

								<div class="table-cell count-col">
									<span class="count-text">{book.totalCount}</span>
								</div>

								<div class="table-cell title-col">
									<div class="book-info">
										<div class="book-image">
											<img src={book.image} alt={book.title} />
										</div>
										<div class="book-details">
											<h3 class="book-title">{book.title}</h3>
											<p class="book-author">{book.author}</p>
										</div>
									</div>
								</div>

								<div class="table-cell isbn-col">
									<span class="isbn-text">{book.isbn}</span>
								</div>
							</div>
						))
					}
				</div>
			</div>
		</div>
	</SubLayout>
</Layout>

<style lang="scss">
	.date-selectors {
		.date-selector-header {
			padding: 16px 24px;

			.date-controls {
				display: flex;
				align-items: center;
				justify-content: center;
				gap: 8px;

				.arrow-btn {
					display: flex;
					align-items: center;
					justify-content: center;
					width: 32px;
					height: 32px;
					border: 1px solid #cdd1d5;
					border-radius: 50%;
					background-color: transparent;
					cursor: pointer;
					transition: all 0.2s ease;

					&:hover {
						background-color: #f0f0f0;
					}

					svg {
						width: 19.2px;
						height: 19.2px;
					}
				}

				.date-display {
					display: flex;
					align-items: center;
					gap: 4px;

					.date-item {
						display: flex;
						align-items: center;
						justify-content: center;
						height: 40px;
						padding: 0 8px;
						border-radius: 6px;
						background-color: transparent;

						.date-text {
							font-family: 'Pretendard GOV', sans-serif;
							font-weight: 700;
							font-size: 24px;
							line-height: 1.5;
							color: #1e2124;
						}
					}
				}
			}
		}

		/* 대출급상승도서 테이블 스타일 */
		.popular-books-table {
			width: 100%;
			margin-top: 16px;

			.table-header {
				display: flex;
				background-color: #ecf2f9;
				border-top: 2px solid #004d80;

				.header-cell {
					display: flex;
					align-items: center;
					justify-content: center;
					height: 44px;
					padding: 8px 0;
					border-right: 1px solid #d8e4f3;
					border-bottom: 1px solid #d8e4f3;
					font-family: 'Pretendard GOV', sans-serif;
					font-weight: 700;
					font-size: 15px;
					line-height: 1.5;
					color: #191a1a;
					text-align: center;

					&:last-child {
						border-right: none;
					}

					&.rank-col {
						width: 50px;
					}

					&.institution-col {
						width: 100px;
					}

					&.date1-col {
						width: 100px;
					}

					&.date2-col {
						width: 100px;
					}

					&.count-col {
						width: 100px;
					}

					&.title-col {
						flex: 1;
					}

					&.isbn-col {
						width: 180px;
					}
				}
			}

			.table-body {
				.table-row {
					display: flex;
					border-bottom: 1px solid #cbcccc;

					&:hover {
						background-color: #f8f9fa;
					}

					.table-cell {
						display: flex;
						align-items: center;
						padding: 12px 16px;
						border-right: 1px solid #cbcccc;
						font-family: 'Pretendard GOV', sans-serif;
						font-size: 17px;
						line-height: 1.5;
						color: #4b4d4d;

						&:last-child {
							border-right: none;
						}

						&.rank-col {
							width: 50px;
							min-width: 50px;
							justify-content: center;

							.rank-number {
								font-weight: 400;
								color: #464c53;
							}
						}

						&.institution-col {
							width: 100px;
							min-width: 80px;
							justify-content: center;

							.rank-change-badge {
								display: flex;
								align-items: center;
								justify-content: center;
								gap: 4px;
								height: 36px;
								width: 75px;
								padding: 8px 12px;
								background-color: #3c79c2;
								border-radius: 20px;

								svg {
									width: 24px;
									height: 24px;
								}

								.change-number {
									font-family: 'Pretendard GOV', sans-serif;
									font-weight: 500;
									font-size: 17px;
									color: white;
								}
							}
						}

						&.date1-col,
						&.date2-col,
						&.count-col {
							width: 100px;
							min-width: 80px;
							justify-content: center;

							.date-text,
							.count-text {
								font-weight: 400;
								text-align: center;
							}
						}

						&.title-col {
							flex: 1;
							min-width: 200px;
							padding: 16px;

							.book-info {
								display: flex;
								flex-direction: row;
								align-items: center;
								gap: 16px;
								width: 100%;
								margin-top: 0 !important;
								overflow: hidden;

								.book-image {
									flex-shrink: 0;
									width: 70px;
									height: 105px;
									background-color: #f0f0f0;
									border-radius: 4px;
									overflow: hidden;

									img {
										width: 100%;
										height: 100%;
										object-fit: cover;
									}
								}

								.book-details {
									flex: 1;
									display: flex;
									flex-direction: column;
									gap: 16px;

									.book-title {
										font-weight: 700;
										font-size: 19px;
										line-height: 1.5;
										color: #4b4d4d;
										margin: 0;
										overflow: hidden;
										text-overflow: ellipsis;
										display: -webkit-box;
										-webkit-line-clamp: 2;
										-webkit-box-orient: vertical;
									}

									.book-author {
										font-family: 'Pretendard GOV', sans-serif;
										font-weight: 400;
										font-size: 17px;
										line-height: 1.5;
										color: #4b4d4d;
										margin: 0;
										overflow: hidden;
										text-overflow: ellipsis;
									}
								}
							}
						}

						&.isbn-col {
							width: 180px;
							min-width: 120px;
							justify-content: center;

							.isbn-text {
								font-weight: 400;
								text-align: center;
							}
						}
					}
				}
			}
		}
	}
</style>
