---
import Layout from '@/layouts/Layout.astro';
import SubLayout from '@/components/layout/SubLayout.astro';
import {
  UiBookCard,
  UiCollectionAccordion,
  UiAccordion,
  UiButton,
} from '@components';

const breadcrumbItems = [
  { label: '홈', href: '/' },
  { label: '도서검색', href: '/support' },
  { label: '소장도서검색' },
];
// 테이블 컬럼 정의
const myColumns = [
  {
    key: 'title',
    label: '도서관',
    width: '145px',
    headerAlign: 'center',
    align: 'center',
  },
  { key: 'status', label: '대출상태', width: '100px', align: 'center' },
  { key: 'dueDate', label: '반납예정일', width: '120px', align: 'center' },
  {
    key: 'service',
    label: '서비스',
    width: '200px',
    align: 'center',
    type: 'buttons',
  },
  { key: 'callNumber', label: '청구기호', width: '120px', align: 'center' },
  { key: 'regNumber', label: '등록번호', width: '120px', align: 'center' },
  {
    key: 'readingRoom',
    label: '정보 출력',
    width: '100px',
    align: 'center',
    type: 'icon',
  },
];

// 실제 데이터로 테이블 행 생성
const collectionData = [
  {
    library: '청학',
    readingRoom: '어린이자료실',
    loanStatus: '비치중',
    service: 'reservation',
    callNumber: 'DV 688.2-조54ㅌ',
    registrationNumber: 'CJ0000036641',
  },
  {
    library: '선학',
    readingRoom: '어린이자료실',
    loanStatus: '비치중',
    service: 'interlibrary',
    callNumber: 'DV 688.2-조54ㅌ',
    registrationNumber: 'GJ0000027414',
  },
  {
    library: '꿈담',
    readingRoom: '어린이자료실',
    loanStatus: '대출중',
    returnDate: '2025.07.31',
    service: 'reservation',
    callNumber: 'DV 688.2-조54ㅌ',
    registrationNumber: 'QJ0000028625',
    reservationCount: 0,
  },
];

const myRows = collectionData.map((item, index) => ({
  id: index + 1,
  title: item.library + ' ' + item.readingRoom,
  status: item.loanStatus,
  dueDate: item.returnDate || '2025.07.31',
  service: [
    { text: '예약하기', variant: 'default' },
    { text: '상호대차', variant: 'default' },
  ],
  callNumber: item.callNumber,
  regNumber: item.registrationNumber,
  readingRoom: 'icon icon-xmd icon-printer',
}));

const myTabs = [
  { id: 'all', label: '전체(3)', active: true },
  { id: 'yeonsu1', label: '연수구청스마트(1)' },
  { id: 'yeonsu2', label: '연수구청스마트(1)' },
  { id: 'yeonsu3', label: '연수구청스마트(1)' },
  { id: 'yeonsu4', label: '연수구청스마트(1)' },
  { id: 'yeonsu5', label: '연수구청스마트(1)' },
  { id: 'yeonsu6', label: '연수구청스마트(1)' },
  { id: 'yeonsu7', label: '연수구청스마트(1)' },
  { id: 'yeonsu8', label: '연수구청스마트(1)' },
  { id: 'yeonsu9', label: '연수구청스마트(1)' },
  { id: 'yeonsu10', label: '연수구청스마트(1)' },
  { id: 'yeonsu11', label: '연수구청스마트(1)' },
  { id: 'yeonsu12', label: '연수구청스마트(1)' },
  { id: 'yeonsu13', label: '연수구청스마트(1)' },
  { id: 'yeonsu14', label: '연수구청스마트(1)' },
  { id: 'yeonsu15', label: '연수구청스마트(1)' },
  { id: 'yeonsu16', label: '연수구청스마트(1)' },
  { id: 'yeonsu17', label: '연수구청스마트(1)' },
  { id: 'yeonsu18', label: '연수구청스마트(1)' },
  { id: 'yeonsu19', label: '연수구청스마트(1)' },
  { id: 'future1', label: '추가예정' },
  { id: 'future2', label: '추가예정' },
  { id: 'future3', label: '추가예정' },
  { id: 'future4', label: '추가예정' },
];
---

<Layout title="소장도서검색_상세검색 - 연수구립도서관">
  <SubLayout title="소장도서검색" breadcrumbItems={breadcrumbItems}>
    <div slot="right">
      <UiButton
        variant="secondary"
        size="small"
        text="돌아가기"
        icon="icon-xmd icon-arrow-left"
        iconPosition="left"
        type="link"
        href="/01_소장도서검색"
      />
    </div>
    <!-- 도서 상세 -->
    <div class="search-detail-section__content">
      <!-- 검색 결과 목록 -->
      <div class="search-result-list mt24">
        <!-- 도서 아이템 -->
        <UiBookCard
          index={1}
          imageUrl="/assets/images/default-book.png"
          badges={[
            { label: 'DVD', type: 'success', size: 'large' },
            { label: '대출불가', type: 'warning' },
          ]}
          title="서점탐정 유동인. 2, 리턴즈"
          titleHighlights={['탐정', '리턴즈']}
          author="조성희 감독"
          details={{
            callNumber: 'DV 688.2-조54ㅌ',
            publishYear: '2017',
            library: '연수청학',
            readingRoom: 'OOO자료실',
            registrationNumber: 'HV0000000881',
          }}
        />
        <!-- 소정정보 -->
        <UiCollectionAccordion
          title="소장정보"
          columns={myColumns}
          rows={myRows}
          tabs={myTabs}
          iconType="arrow"
          className="custom-accordion"
          tabsClassName="ui-tab--grid-6"
        />

        <UiAccordion
          title="책소개"
          variant="bordered"
          size="medium"
          iconType="chevron"
          isExpanded={true}
          className="custom-accordion"
        >
          <div class="book-description">
            <p>
              정경해 시집. 시인의 시는 평범하고 사소한 일상의 연속을 부유하는
              동시대인들의 표상이다. 정경해의 의식의 흐름은 정경해 한 개인만의
              의식의 흐름이 아니라 일종의 집단무의식으로서의 동시대인들 일반의
              집단무의식의 흐름을 이룬다.
            </p>
          </div>
        </UiAccordion>

        <UiAccordion
          title="목차"
          variant="bordered"
          size="medium"
          iconType="chevron"
          isExpanded={true}
          className="custom-accordion"
        >
          <div class="book-description">
            <p>
              정경해 시집. 시인의 시는 평범하고 사소한 일상의 연속을 부유하는
              동시대인들의 표상이다. 정경해의 의식의 흐름은 정경해 한 개인만의
              의식의 흐름이 아니라 일종의 집단무의식으로서의 동시대인들 일반의
              집단무의식의 흐름을 이룬다.
            </p>
          </div>
        </UiAccordion>

        <UiAccordion
          title="사서추천도서"
          variant="bordered"
          size="medium"
          iconType="chevron"
          isExpanded={true}
          className="custom-accordion"
        >
          <div class="book-description">
            <p>
              정경해 시집. 시인의 시는 평범하고 사소한 일상의 연속을 부유하는
              동시대인들의 표상이다. 정경해의 의식의 흐름은 정경해 한 개인만의
              의식의 흐름이 아니라 일종의 집단무의식으로서의 동시대인들 일반의
              집단무의식의 흐름을 이룬다.
            </p>
          </div>
        </UiAccordion>
      </div>
    </div>
  </SubLayout>
</Layout>
