#!/bin/bash

# Pre-commit hook: Guide.astro 자동 업데이트
# 커밋하기 전에 변경된 파일들을 분석하여 guide.astro에 작업 내역을 추가합니다.

echo "🔄 Guide.astro 자동 업데이트를 실행합니다..."

# Node.js 스크립트 실행
node scripts/update-guide.js

# 스크립트 실행 결과 확인
if [ $? -eq 0 ]; then
    echo "✅ Guide.astro 업데이트가 완료되었습니다."
    
    # guide.astro가 수정되었다면 스테이지에 추가
    if git diff --quiet src/pages/guide.astro; then
        echo "📝 Guide.astro 변경사항 없음"
    else
        echo "📝 Guide.astro 변경사항을 스테이지에 추가합니다..."
        git add src/pages/guide.astro
    fi
else
    echo "❌ Guide.astro 업데이트 중 오류가 발생했습니다."
    echo "⚠️  커밋을 계속 진행합니다..."
fi

echo ""
