#!/bin/bash

# Pre-commit hook: Guide.astro ìë™ ì—…ë°ì´íŠ¸
# ì»¤ë°‹í•˜ê¸° ì „ì— ë³€ê²½ëœ íŒŒì¼ë“¤ì„ ë¶„ì„í•˜ì—¬ guide.astroì— ì‘ì—… ë‚´ì—­ì„ ì¶”ê°€í•©ë‹ˆë‹¤.

echo "ğŸ”„ Guide.astro ìë™ ì—…ë°ì´íŠ¸ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤..."

# Node.js ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
node scripts/update-guide.js

# ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ ê²°ê³¼ í™•ì¸
if [ $? -eq 0 ]; then
    echo "âœ… Guide.astro ì—…ë°ì´íŠ¸ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤."
    
    # guide.astroê°€ ìˆ˜ì •ë˜ì—ˆë‹¤ë©´ ìŠ¤í…Œì´ì§€ì— ì¶”ê°€
    if git diff --quiet src/pages/guide.astro; then
        echo "ğŸ“ Guide.astro ë³€ê²½ì‚¬í•­ ì—†ìŒ"
    else
        echo "ğŸ“ Guide.astro ë³€ê²½ì‚¬í•­ì„ ìŠ¤í…Œì´ì§€ì— ì¶”ê°€í•©ë‹ˆë‹¤..."
        git add src/pages/guide.astro
    fi
else
    echo "âŒ Guide.astro ì—…ë°ì´íŠ¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."
    echo "âš ï¸  ì»¤ë°‹ì„ ê³„ì† ì§„í–‰í•©ë‹ˆë‹¤..."
fi

echo ""
